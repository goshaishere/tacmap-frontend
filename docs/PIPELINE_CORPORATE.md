# Пайплайн перехода продукта в корпоративную сторону

**Статус:** реализация выполнена. Приложение поддерживает переключение военная/корпоративная иерархия, локализацию ru/en, канбан задач, настройки компании и темы. Актуальное описание продукта — в [README.md](../README.md).

---

## Цели

- Сохранить **карту с возможностью ставить на ней задачи** (метки, привязка задач к точкам).
- Доработать **экран с канбан-доской**: дизайн и UI/UX.
- Доработать **механизм создания задач**: типовые должности и отделы, привязка к действиям по ролям.
- Реализовать **гибкую иерархию**: выбор типа (военная / корпоративная), переключение с сохранением настроек в localStorage.
- Ввести **локализацию ru/en** с самого начала.

---

## 1. Карта и задачи на карте

- **Без изменений по функционалу**: карта, метки, создание/редактирование меток, привязка маркеров к задачам.
- При смене иерархии на корпоративную подписи/локализация интерфейса карты переключаются на i18n.

---

## 2. Канбан-доска: дизайн и UI/UX

- Визуальное обновление колонок: тени, отступы, заголовки колонок с иконками и счётчиками.
- Карточки задач: единый стиль, приоритет/дедлайн/исполнитель, быстрые действия (перетаскивание, меню).
- Пустые состояния колонок: понятная подпись и CTA «Создать задачу» при необходимости.
- Адаптив: на мобильных — фильтр по статусам и список карточек без горизонтального скролла колонок.
- Все тексты канбана вынести в i18n (ru/en).

---

## 3. Создание и типы задач

- **Роли/должности**: использовать существующие «действия по ролям» (RoleActions); в корпоративном режиме — типовые **должности** и **отделы** (см. п. 5).
- При создании задачи:
  - выбор типа задачи привязан к действиям по роли/должности (например: «Провести разведку», «Назначить медика» → в корпоративе: «Согласовать», «Проверить», «Подготовить отчёт»).
  - возможность выбора отдела/команды и исполнителя (из текущей иерархии).
- Типовые статусы сохраняются: создана, назначена, в работе, на проверке, завершена, пауза, отменена.

---

## 4. Иерархия: типы и переключение

- **Два типа иерархии** (настраиваемые):
  - **Военная (military)**: уровень 1 — Фракция (faction), уровень 2 — Сквад (squad). Данные: `factions`, `squads`, `roles`.
  - **Корпоративная (corporate)**: уровень 1 — Департамент/Отдел (department), уровень 2 — Команда (team). Данные: `departments`, `teams`, `positions`.
- В настройках компании (или профиля) — **переключатель типа иерархии**. При переключении:
  - текущие настройки компании (выбранная фракция/сквад или отдел/команда, роль/должность) **сохраняются в localStorage** в виде JSON (отдельно для military и corporate), чтобы при возврате к типу данные восстанавливались.
- Ключи localStorage (пример):
  - `companyHierarchy` — текущий тип: `military` | `corporate`.
  - `companySettings` — объект с полями для военного и корпоративного режима (выбранные id/keys фракции, сквада, отдела, команды, роли, должности).

---

## 5. Типовые должности и отделы (корпоратив)

- **Отделы (departments)** — аналоги фракций по смыслу «верхний уровень»:
  - Руководство, HR, Финансы, IT, Продажи, Маркетинг, Юридический, Операции, Поддержка и т.п.
- **Команды (teams)** — аналоги сквадов:
  - Команда по продукту A, Команда по продукту B, Команда разработки, Команда аналитики и т.п.
- **Должности (positions)** — аналоги ролей с действиями:
  - Руководитель, Менеджер проекта, Аналитик, Разработчик, Дизайнер, HR-менеджер, Бухгалтер и т.п.
  - У каждой должности — список **типовых действий** (для быстрого создания задач): «Согласовать», «Проверить», «Подготовить отчёт», «Провести встречу», «Ревью», «Исправить», «Передать в отдел» и т.д.

---

## 6. Локализация ru/en

- Подключить **vue-i18n**.
- Файлы локалей: `src/locales/ru.js`, `src/locales/en.js` (или разбивка по доменам: common, tasks, map, profile, settings).
- Выбор языка: переключатель в шапке или в настройках; сохранение выбора в localStorage (`appLocale`).
- Все пользовательские строки в интерфейсе вынести в ключи i18n (карта, канбан, форма задач, профиль, иерархия, настройки, помощь).

---

## Порядок реализации (чек-лист)

1. [x] Документ пайплайна (этот файл).
2. [x] i18n: vue-i18n, ru/en, переключатель в настройках, сохранение локали в `appLocale`.
3. [x] Store иерархии: `company` store, тип (military/corporate), сохранение/восстановление настроек из localStorage (`companyData` и др.).
4. [x] Данные: `departments`, `teams`, `positions` в `src/data/`, действия по должностям.
5. [x] Профиль и настройки: переключатель типа иерархии в CompanySettings, отображение отдел/команда или фракция/сквад в зависимости от типа.
6. [x] Канбан: страница Tasks, карточки, колонки по статусам, строки в i18n.
7. [x] Форма задач: типы из RoleActions/должностей, выбор отдела/команды и исполнителя, привязка к метке на карте.
8. [x] Карта: подписи и интерфейс через i18n.

Продукт готов к использованию в корпоративном и военном сценарии с переключением иерархии и локализацией ru/en.
